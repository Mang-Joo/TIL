---
description: Dependency Inversion Principle
---

# DIP 의존성 역전 원칙

### DIP

DIP에서 말하는 '유연성이 극대화 된 시스템' 이란 소스 코드 의존성이 추상에 의존하며 구체에 의존하지 않는 시스템이다.

이 말의 뜻은 자바에서 import 구문은 오직 interface만 참조해야 한다는 뜻이다.\
구체적인 대상에는 절대 의존해서는 안된다.

우리는 이 규칙을 현실적으로 보기엔 힘들다.\
소프트웨어 시스템이라면 구체적인 많은 장치에 반드시 의존해야 한다.\
예를 들어 자바에서 String 클래스는 구체클래스이지만 이것을 애써 우리는 추상클래스로 만들려는 시도는 하지 않는다.

DIP를 논할 땐 운영체제나 플랫폼 같이 안정성이 보장된 환경에 대해서는 무시하고 진행하면 된다.

우리가 의존하지 않도록 피하고자 하는 것은 바로 변동성이 큰 구체적인 요소이다.

#### 안정된 추상화

추상 인터페이스에 변경이 생기면 이를 구체화한 구현체들도 따라서 수정해야 한다.\
반대로 구체적인 구현체에 변경이 생기더라도 그 구현체가 구현하는 인터페이스는 대다수의 경우 변경될 필요가 없다.\
즉, 인터페이스는 구현체보다 변동성이 낮다.

* 변동성이 큰 구체 클래스를 참조하지 말자.
* 변동성이 큰 구체 클래스로부터 파생하지 말자.
* 구체 함수를 오버라이드 하지 말자.

#### DIP의 다이어그램

우리는 DIP 원칙을 생각하지않고 구체화에 의존하여 다이어그램을 그리면 다음과 같은 그림이 나타난다.

<img src="../../../.gitbook/assets/file.drawing (4).svg" alt="1.1" class="gitbook-drawing">

이러한 그림을 보면 가장 중요한 비즈니스로직을 담당하는 Service가 Repository계층에 의존하게 된다.

Service는 Repository가 MySQL이나 NoSQL, 혹은 정말 FileSystem으로 저장을 하게 되더라도 바뀌면 안된다.\
이러한 것을 지키기 위해서 Interface를 추가하면 다음과 같은 그림이 나온다.

<img src="../../../.gitbook/assets/file.drawing (5).svg" alt="1.2" class="gitbook-drawing">

다음과 같은 그림을 보면 Service는 Repository를 추상화한 Interface에 의존한다.\
그럼 Service는 Repository가 변경되더라도 Service의 코드는 변경되지 않고 사용할 수 있다.

#### 결론

DIP는 아키텍처 다이어그램에서 가장 눈에 띄는 원칙이다.

의존성을 최대한 제거하고 도메인은 그 어떤 의존성도 없이 활용할 수 있어야한다고 생각한다.\
그러기 위해선 이러한 DIP원칙을 많이 사용하게 될 것 같다.
