---
description: InnoDB를 기준으로 작성
---

# MySQL 스레딩 구조

MySQL서버는 프로세스 기반이 아닌 스레드 기반으로 동작하며, 크게 포그라운드와 백그라운드 스레드로 구분한다.

## 포그라운드 스레드(클라이언트 스레드)

스레드는 접속된 클라이언트의 수만큼 존재하며, 각 클라이언트 사용자가 요청하는 쿼리 문장을 처리한다.\
사용자가 작업을 마치고 커넥션을 종료하면, 스레드는 다시 스레드 캐쉬로 돌아간다.\
단, 일정 개수 이상의 대기 중인 스레드가 있으면 그냥 스레드를 종료시킨다.

해당 스레드는 데이터를 데이터 버퍼나 캐시로부터 가져오며, 버퍼나 캐시 까지만 처리 하고 나머지는 백그라운드 스레드가 처리한다.

## 백그라운드 스레드

여기서 가장 중요한 것은 로그 스레드와 버퍼의 데이터를 디스크로 내려 쓰는 작업을 처리하는 쓰기 스레드이다.\
데이터를 읽는 작업은 주로 클라이언트 스레드에서 처리되기 때문에 읽기 스레드는 많이 설정할 필요가 없지만, 쓰기 스레드는 백그라운드에서 처리가 되기 때문에 스레드 개수를 넉넉히 설정하는 것이 좋다.

또한 읽기 작업은 지연되면 안된다. 그래서 쓰기 작업을 버퍼링해서 일괄 처리하는 기능이 탑재되어 있으며 이렇기 때문에 데이터가 변경되는 경우 데이터가 디스크의 데이터 파일로 완전히 저장될 때까지 기다리지 않아도 된다.
